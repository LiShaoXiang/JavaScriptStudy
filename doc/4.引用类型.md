# 引用类型
> 学习本节，应该知道：
> 如何使用对象？
> 如何创建和使用数组？
> 理解基本的JavaScript类型。
> 理解基本类型和基本包装类型。

引用类型的值（即对象）是引用类型的一个实例。

## 一、Object类型
创建Object实例有2中方式。
第一种使用new操作符后面跟构造函数
```javascript
var person = new Object();
person.name = "Nick";
person.age = 29;
```
第二种使用对象字面量表示法
```javascript
var person = {
    name : "Nick",
    age : 29  //最后一个属性后面不能加逗号
};
//属性名表示也可以使用字符串
var person2 = {
    "name" : "Joe",
    "age" : 28,
    5 : true //这里的5会自动转换成字符串表示“5”
};

var person3 = {}; //与var person3 = new Object()相同
```

## 二、Array类型
除了Object之外，Array恐怕是JavaScript中最常用的类型了。但是JavaScript中的Array与其他语言有较大区别，表现在JavaScript数组的每一项都可以保存任何类型的数据。而且其数组大小是可以动态调整的，随着数据增加自动增长，以容纳新增数据。另外其length属性不是只读属性，可以通过设置length属性改变数组的长度。
数组创建的方式也有两种。
第一种是构造函数
```javascript
var colors = new Array();
var colors = Array();//和上面等价可以省略new操作符
var colors = new Array(20);//创建数组长度为20的数组
var names = new Array("Joe");//创建包含一个字符串元素的数组names，注意和上面传数字的区别哦
var names = new Array("Mike","Lisa","Dan");//包含三个字符串元素的数组
```
第二种基本创建方式是数组字面量表示法
```javascript
var colors = [];//创建一个空数组
var colors = ["blue","red","green"];//创建包含三个字符串的数组
```
读取和设置数组元素中的值，使用方括号`[]`和基于0的数字索引，下面举个栗子
```javascript
var colors = ["blue","red","green"];
alert(colors[0]); //显示第一项
colors[2] = "black";//修改第三项，最后一项的索引为length-1
alert(colors.length);//显示数组的length属性
```

### 1.检测数组
instanceof操作符的问题在于，它假定了单一的全局环境。如果网页中包含了多个框架，那实际上就存在2个以上不同的全局执行环境，各个环境中可能具备各自不同的Array构造函数。新的JavaScript标准新增了`Array.isArray()`方法来最终确定某个值到底是不是数组，而不管它是在哪个环境中创建的。
```javascript
if (value instanceof Array){//不推荐使用
    //do something
}
if (Array.isArray(value)){ //推荐使用
    //do something
}
```

### 2.转换方法
如前所述，所有对象都具有toLocaleString(),toString()和valueOf()方法，默认都会以逗号分隔形式输出字符串，如果要使用定制化的分隔符请使用`join()`，
```javascript
var colors = ["red","blue","green"];
alert(colors.toString());//red,blue,green
alert(colors.valueOf()); //red,blue,green
alert(colors);           //red,blue,green
//之说以结果都一样是因为，alert只能接收字符串参数，后台会自动调用相应对象toString或者valueOf，转换为字符串
alert(colors.join("||"));//red||blue||green
alert(colors.join(",")); //red,blue,green
```
> 注意：如果数组中某一项值是null或者undefined，那么该值在join,toLocaleString,toString和valueOf中返回结果以空字符串表示。

### 3.栈方法
JavaScript可以使数组表现得像栈一样LIFO(后进先出Last-in-First-out)，也就是最新添加的最早被移除，JavaScript为数组提供了`push()`和`pop()`方法，以表现类似栈的行为。
```javascript
var colors = new Array();
var count = colors.push("red","green");//push方法接受任意数量的参数，然后返回修改后的数组长度
alert(count);//2
count = colors.push("black");
alert(count);//3
var item = colors.pop(); //取得最后一项并返回该项
alert(item);//"black"
alert(colors.length);//2
```

### 4.队列方法
FIFO（First-In-First-Out）。队里在列表末端添加项，从列表前端移除项。
`shift()`移除数组第第一个项，返回改项，并将数组长度-1.
push()在数组末端追加`任意个`元素。并返回新数组长度。
下面2个方法可实现反向队列
`unshift()`,见名知意，与shift()用途相反，它能在数组前端添加`任意个`元素并返回最数组长度。
pop()在数组末端移除并返回该元素。
```javascript
var colors = new Array();
var count  = colors.push("red","blue");
alert(count);//2
count = colors.push("black");
alert(count);

var item = colors.shift();//取得第一项
alert(item); //red
alert(colors.length);

/*下面演示反向队列的例子，注意队列都是先进先出原则哦，这里的反向只是只方向而已*/
var colors1 = new Array();
var count1 = colors1.unshift("red","green");
alert(count1);//2
count1 = colors1.unshift("black");
alert(count1);//3

var item1 = colors1.pop();//取得最后一项
alert(teim1);//green
alert(colors1.length);//2
```

### 5.重排序方法
数组中存在2个可以用来重新排序的方法：`reverse()`和`sort()`。
reverse()方法，反转原数组顺序，没什么好说的。
sort()，按升序排列数据项，但是，sort方法内部会调用每个元素的toString转型为字符串，再按字符串排序，即使是数值类型也是转换为字符串，`也就是说sort()方法排序比较的是字符串`。下面举个栗子
```javascript
var values = [0,1,5,10,15];
values.sort();
alert(values);//0,1,10,15,5
```
这种排序方式在很多情况下都不是最佳方案。因此sort()函数可以接受一个`比较函数`作为参数，我们可以定制化排序规则。
比较函数接收2个参数，如果第一个参数要在第二个参数前面返回一个负数；如果2个参数相等返回0；如果第一个参数要排在第二个参数后面返回一个正数。下面是一个简单的比较函数
```javascript
function compare(value1,value2){
    if(value1<value2){
        return -1;
    }else if(value1 > value2){
        return 1;
    }else{
        return 0;
    }
};
//这个比较函数适用于大多数数据类型，只需将其作为参数传递给sort()即可
var values = [0,1,5,10,15];
values.sort(compare);
alert(values);//0,1,5,10,15
```
数值类型任然保持了正确的类型，当然如果要产生降序效果，只需交换比较函数的返回值即可。
```javascript
function compare(value1,value2){
    if(value1<value2){
        return 1; //交换返回值
    }else if(value1 > value2){
        return -1;//交换返回值
    }else{
        return 0;
    }
};
//这个比较函数适用于大多数数据类型，只需将其作为参数传递给sort()即可
var values = [0,1,5,10,15];
values.sort(compare);
alert(values);//15,10,5,1,0
```
对于数值类型或者其valueOf()方法会返回数值类型的对象类型，比较函数可以更简单
```javascript
function compare(value1,value2){
    return value2 - value1;//降序。 value1- value2为升序
}
```

### 6.操作方法
concat()，基于当前数组中的所有项创建一个新数组。无参数则返回当前数组的副本，有参数则将每个参数都追加到副本数组中产生新数组。不改变原数组。
slice()，基于当前数组的一个或多个项创建一个新数组，可接受一个或2个参数（参数为原数组索引）。不影响原数组。
splice()，向数组中部插入项。
- 删除，只需指定2个参数，要删除的第一项的位置，和要删除的项数。如splice(0,2)删除前2项。
- 插入，提供三个参数，起始位置，0（要删除的项数），要插入的项（可以任意个），如splice(2,0,"red","green")。
- 替换，splice(2,1,"red","green"),删除2位置的项，然后从2位置开始插入“red”和“green”。
splice始终都会返回一个数组包含被删除的项，如果被删除项为0则返回一个空数组。

### 7.位置方法
JavaScript数组中有2个位置方法，indexOf()和lastIndexOf()。两个方法都接收2个参数：要查找的项、和查找起点位置索引（可选）。一个从开头向后找，一个从末尾向前找。返回找到项的位置索引，没找到返回-1。`注意`：查找比较用的是全等操作符（===）。
```javascript
var numbers = [1,2,3,4,5,6,7,8];
alert(numbers.indexOf(4));//3
```

### 8.迭代方法
JavaScript定义了5个迭代方法。每个方法都接收2个参数：第一个参数为要在每一项上运行的函数，第二个参数可选，运行该函数的作用域对象——影响this的值。
传入函数都接收三个参数：数组项的值，该项在数组中的位置和数组对象本身。
- every()：对数组中每一项运行给定函数，如果每一项都返回true，则返回true。
- filter()：对数组中每一项运行给定函数，返回为true的项组成的数组。
- forEach()：对数组中每一项运行给定函数，没有返回值。
- map()：对数组中每一项运行给定函数，返回每次函数调用结果组成的数组。
- some()：对数组中每一项运行给定函数，如果该函数任意一项返回true，则返回true。
every与some最相似，下面举个栗子
```javascript
var numbers = [1,2,3,4,5,4,3,2,1];
var everyResult = numbers.every(function(item,index,array){
    return (item > 2);
});
alert(everyResult);//false
var someResult = numbers.some(function(item,index,array){
    return (item > 2);
});
alert(someResult);//true
var filterResult = numbers.filter(function(item,index,array){
    return (item > 2);
});
alert(filterResult);//3,4,5,4,3
var filterResult = numbers.filter(function(item,index,array){
    return (item > 2);
});
alert(filterResult);//3,4,5,4,3
var mapResult = numbers.map(function(item,index,array){
    return (item * 2);
});
alert(mapResult);//2,4,6,8,10,8,6,4,2

numbers.forEach(function(item,index,array){
    //do something
});

```

### 9.缩小方法
reduce()和reduceRight()作用类似只不过方向相反。
```javascript
var values = [1,2,3,4,5];
var sum = values.reduce(function(prev,cur,index,array){
    return prev+cur;
});
alert(sum);//15
var sum1 = values.reduceRight(function(prev,cur,index,array){
    return prev+cur;
});
alert(sum1);//15
```

## 三、Date类型
JavaScript中创建一个日期对象，使用new操作符和Date构造函数即可。
```javascript
var now  = new Date();//无参数创建对象自动获得当前日期和时间。如果想创建特定的日期和时间，传入参数必须表示该日期的毫秒数
```

如果想创建特定的日期和时间，传入参数必须表示该日期的毫秒数，JavaScript为了简化这一过程，提供了2个方法返回日期的毫秒数`Date.parse()`和`Date.UTC()`。
parse接收一个字符串，如果接收的字符串不能表示日期，返回NaN。
UTC接收的参数依次是，年份、月份（基于0，一月是0），天（1-31），小时（0-23），分，秒，毫秒，前2个参数年月必须。
```javascript
var someDate = new Date(Date.parse(May 25,2017));
var someOtherDate  = new Date(Date.UTC(2017,9));
```

`Date.now()`方法可返回当前时间毫秒数，简化了使用Date对象分析代码的工作，举个栗子
```javascript
var start = Date.now()//取得开始时间
doSomething();//调用函数
var stop = Date.now();//取得停止时间
var result = stop - start;
```

### 1.继承的方法
与其他引用类型一样Date也重写了toLocaleString(),toString()和valueOf();
### 2.日期格式化方法
Date类型还有一些专门用于将日期格式化为字符串的方法如下
```javascript
toDateString();
toTimeString();
toLocaleDateString();
toLocaleTimeString();
toUTCString();
```
### 3.日期、时间组件方法
一堆get和set方法，请查相关文档或互联网。

## 四、RegExp类型
JavaScript通过RegExp类型来支持正则表达式。
```javascript
var expression = /pattern/flags;
//pattern部分可以是简单或复杂的正则表达式
//flages,每个正则可以带一个或多个flags。
g:global表示全局模式
i:case-insensitive表示不区分大小写
m:multiline表示多行模式
var pattern1 = /at/gi;
```

### 1.RegExp实例属性
RegExp每个实例都有下列属性
```javascript
global:布尔值，表示是否设置了g标志
ignoreCase:布尔值，表示是否设置了i标志
multiline:布尔值，是否设置了m标志
lastIndex:整数，表示开始搜索下一个匹配项字符位置，从0算起。
source:正则表达式的字符串表示。
var pattern = /\[bc\]at/i;
alert(pattern.global);//false
alert(pattern.source);// "\[bc\]at"
```

### 2.RegExp实例方法
主要是`exec()`
//TODO

### 3.RegExp构造函数属性
//TODO
### 4.局限性
//TODO






