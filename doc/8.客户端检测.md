# 客户端检测
> 了解就行

检测web客户端的手段很多，而且各有利弊。但最最重要的还是要知道，不到万不得已，就不要使用客户端检测。只要能找到更通用的方法，就应该优先采用更通用的方法。一言以蔽之，先设计最通用的方案，然后再使用特定于浏览器的技术增强方案。

## 一、能力检测
最常用也是最为人们广泛接受的客户端检测形式是能力检测（又称特性检测）。能力检测的目标不是识别浏览器，而是识别浏览器的能力。采用这种方式不用顾忌特定的浏览器如何如何，只需要确定浏览器的支持特定的能力，就可以给出解决方案。其基本模式如下：
```javascript
if(object.propertyInQuestion){
    //使用object.propertyInQuestion
}
```
举例来说，IE5.0之前的版本不支持document.getELementsById()这个DOM方法，但可以使用非标准的document.all实现相同的目的，于是，也有了类似下面的能力检测代码：
```javascript
function getElememt(id){
    if(document.getElementById){ //能力检测要先检测达成目的的常用特性，先检测常用特性以保证代码最优化（第一个重要概念）
        return document.getElementById(id);
    }else if(document.all){
        return document.all[id];
    }else {
        throw new Error("No way to retrieve element");
    }
}
//第二个重要概念，必须测试实际用到的特性。一个特性不存在，不一定意味着另一个特性也存在。

```
> 在实际开发中，应该将能力检测作为确定下一步解决方案的依据，而不是用它来判断用户使用什么浏览器。

## 二、怪癖检测
与能力检测类似，怪癖检测的目标是识别浏览器的特殊行为。但与能力检测确认浏览器支持什么能力不同，怪癖检测是想要知道浏览器存在什么缺陷（bug）。

## 三、用户代理检测
争议最大的一种客户端检测技术用户代理检测。通过检测用户代理字符串来确定实际使用的浏览器。用户代理检测是客户端检测的最后一个选择。只要可能，都应该优先采用能力检测和怪癖检测。








